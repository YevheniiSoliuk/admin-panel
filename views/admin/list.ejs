<%- include ../layouts/header.ejs %>

<div>
   <% if(isAdmin) { %>
      <div class="btn-continer add-btn">
         <button class="button" onclick="addUser()">Dodaj</button>
      </div>
   <% } %>

   <div class="data-table">
      <table>
         <tr>
            <th>Nr</th>
            <th>Imię</th>
            <th>Nazwisko</th>
            <th>Login</th>
            <th>Email</th>
            <th>Telefon</th>
            <th>Admin</th>
         </tr>
         <% const formatedData = data.filter((user) => user.login !== login);
            if(formatedData.length) {
               for(var i = 0; i < formatedData.length; i++) {
                  %>
                  <tr>
                     <td><%= formatedData[i].id %></td>
                     <td><%= formatedData[i].name %></td>
                     <td><%= formatedData[i].lastname %></td>
                     <td><%= formatedData[i].login %></td>
                     <td><%= formatedData[i].email %></td>
                     <td><%= formatedData[i].phone ?? "N/A" %></td>
                     <td>
                        <% if (formatedData[i].isAdmin) { %>
                           Tak
                        <% } else { %>
                           Nie
                        <% } %>
                     </td>
                  </tr>
            <%
               }
         } else {
            %>
            <tr>
               <td colspan="6">Brak użytkownikow</td>
            </tr>
            <%
         }
         %>
      </table>
   </div>
</div>

<%- include ../layouts/footer.ejs %>